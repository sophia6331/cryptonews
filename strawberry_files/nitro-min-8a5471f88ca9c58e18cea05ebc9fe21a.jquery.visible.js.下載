(function(t){var e=t(window);t.fn.visible=function(t,i,r){if(this.length<1)return;var o=this.length>1?this.eq(0):this,n=o.get(0),f=e.width(),h=e.height(),r=r?r:"both",l=i===true?n.offsetWidth*n.offsetHeight:true;if(typeof n.getBoundingClientRect==="function"){var u=n.getBoundingClientRect(),s=u.top>=0&&u.top<h,g=u.bottom>0&&u.bottom<=h,c=u.left>=0&&u.left<f,a=u.right>0&&u.right<=f,v=t?s||g:s&&g,b=t?c||a:c&&a;if(r==="both")return l&&v&&b;else if(r==="vertical")return l&&v;else if(r==="horizontal")return l&&b}else{var d=e.scrollTop(),p=d+h,w=e.scrollLeft(),m=w+f,y=o.offset(),z=y.top,B=z+o.height(),C=y.left,R=C+o.width(),j=t===true?B:z,q=t===true?z:B,H=t===true?R:C,L=t===true?C:R;if(r==="both")return!!l&&q<=p&&j>=d&&L<=m&&H>=w;else if(r==="vertical")return!!l&&q<=p&&j>=d;else if(r==="horizontal")return!!l&&L<=m&&H>=w}}})(jQuery);