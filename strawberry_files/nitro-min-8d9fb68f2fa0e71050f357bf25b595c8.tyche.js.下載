"use strict";var tyche={version:"1.2",constructor:tyche,extend:function(){let t=arguments[0]||{},e=arguments.length,n=this,a;for(let i=0;i<e;i++){let o=[];if(0===i){if(1!==e){continue}t=n;o=arguments[0]}if(0===o.length){o=arguments[i]}for(a in o){t[a]=o[a]}}return t},init:function(){if(typeof String.prototype.replaceAll=="undefined"){String.prototype.replaceAll=function(t,e){return this.replace(new RegExp(t,"g"),()=>e)}}},wcap:{},orddd:{},bkap:{},ac:{},pdd:{},pif:{},cos:{},con:{},dw:{},pur:{},pgf:{},cfp:{},cpp:{},dm_1:{},dm_2:{},dm_3:{},dm_4:{},dm_5:{},dm_6:{},dm_7:{},dm_8:{},dm_9:{},dm_10:{},dm_11:{},dm_12:{},dm_13:{},dm_14:{},dm_15:{},plugin_deactivation:{fn:{return:function(t,e,n=""){return"undefined"!==typeof t[e]&&""!==t[e]?""!==n?n:t[e]:""}},modal:function(t,e){if(""===tyche.plugin_deactivation.fn.return(e,"deactivation_data")||""===tyche.plugin_deactivation.fn.return(e,"nonce")||""===tyche.plugin_deactivation.fn.return(e,"deactivation_req_msg")){return""}let n=e.deactivation_data,a=e.nonce,i=e.deactivation_req_msg;if("undefined"===typeof n.template||"undefined"===typeof n.reasons){return""}let o=n.template,l=n.reasons,s="";if(Array.isArray(l)&&l.length>0){l.forEach(function(t){s+=`
						<li
							class="reason${tyche.plugin_deactivation.fn.return(t,"input_type"," has-input")}${tyche.plugin_deactivation.fn.return(t,"html"," has-html")}"
							data-input-type="${tyche.plugin_deactivation.fn.return(t,"input_type")}"
							data-input-placeholder="${tyche.plugin_deactivation.fn.return(t,"input_placeholder")}">
								<label>
									<span>
										<input type="radio" name="selected-reason" value="${tyche.plugin_deactivation.fn.return(t,"id")}" />
									</span>
									<span>
										${tyche.plugin_deactivation.fn.return(t,"text")}
									</span>
								</label>
							${""!==tyche.plugin_deactivation.fn.return(t,"html")?'<div class="reason_html">'+tyche.plugin_deactivation.fn.return(t,"html")+"</div>":""}
						</li>`});s+=`<input type="hidden" name="nonce" value="${a}" />`;let e=jQuery(o.replace("{PLUGIN}",t).replace("{HTML}",s).replace("{DEACTIVATION_REQ_MSG}",i));e.appendTo(jQuery("body"));return e}},show_modal:function(t){t.find(".button").removeClass("disabled");let e=t.find(".button-deactivate");if(e.length>0&&t.hasClass("no-confirmation-message")&&!e.hasClass("allow-deactivate")){e.addClass("allow-deactivate");t.find(".button-skip-deactivate").addClass("allow-deactivate");t.find(".ts-modal-panel").removeClass("active ");t.find('[data-panel-id="reasons"]').addClass("active")}t.addClass("active");jQuery("body").addClass("has-ts-modal")},close_modal:function(t){t.removeClass("active");jQuery("body").removeClass("has-ts-modal")},events:{listeners:function(t,e,n){if(0!==jQuery(`.${n}.ts-slug`).prev("a")){jQuery(`.${n}.ts-slug`).prev("a").on("click",function(t){t.preventDefault();tyche.plugin_deactivation.show_modal(e)})}e.on("click",".button-skip-deactivate",function(e){e.preventDefault();jQuery(".ts-modal-footer p").hide();tyche.plugin_deactivation.events.button_submit(this,t,n,true)});e.on("click",".button-deactivate",function(e){e.preventDefault();jQuery(".ts-modal-footer p").hide();tyche.plugin_deactivation.events.button_submit(this,t,n)});e.on("click",'input[type="radio"]',function(){jQuery(".ts-modal-footer p").hide();tyche.plugin_deactivation.events.button_option_selection(this,e)});e.on("click",function(t){tyche.plugin_deactivation.events.button_click_outside_window(t,e)})},button_submit:function(t,e,n,a=false){if(jQuery(t).hasClass("disabled")||!jQuery(t).hasClass("allow-deactivate")){return}let i=jQuery(t).parents(`.${n}.ts-modal`),o=jQuery('input[type="radio"]:checked'),l=o.parents("li:first"),s=l.find('textarea, input[type="text"]'),d=a?0:o.val(),r=a?"Deactivation Reason Skipped":l.text().trim();if(0===o.length&&!a){jQuery(".ts-modal-footer p").css("display","inline-block");return}let u={"action":"tyche_plugin_deactivation_submit_action","reason_id":d,"reason_text":r,"reason_info":0!==s.length?s.val().trim():"","plugin_short_name":n,"plugin_name":jQuery(`.${n}.ts-slug`).attr("data-plugin"),"nonce":jQuery('input[name="nonce"]').val()};let c=tyche.plugin_deactivation.fn.return(e,"ajax_url"),p=jQuery(`.${n}.ts-slug`).prev().prop("href");if(""!==c&&""!==p){jQuery.ajax({url:c,method:"POST",data:u,beforeSend:function(){i.find(".button-deactivate").addClass("disabled");i.find(".button-skip-deactivate").addClass("disabled")},complete:function(){window.location.href=p}})}},button_click_outside_window:function(t,e){let n=jQuery(t.target);if(n.hasClass("ts-modal-body")||n.hasClass("ts-modal-footer")){return}if(!n.hasClass("button-close")&&(n.parents(".ts-modal-body").length>0||n.parents(".ts-modal-footer").length>0)){return}tyche.plugin_deactivation.close_modal(e)},button_option_selection:function(t,e){e.find(".reason-input").remove();jQuery(t).parents("ul#reasons-list").children("li.li-active").removeClass("li-active");let n=jQuery(t).parents("li:first");if(n.hasClass("has_html")){n.addClass("li-active")}if(n.hasClass("has-input")){n.append(jQuery(`<div class="reason-input">${"textfield"===n.data("input-type")?'<input type="text" />':'<textarea rows="5"></textarea>'}</div>`));n.find("input, textarea").attr("placeholder",n.data("input-placeholder")).focus()}}}}};tyche.init();