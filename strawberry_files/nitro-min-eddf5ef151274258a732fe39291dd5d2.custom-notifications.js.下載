(function(t){"use strict";function e(e,o,i,c){if("MutationObserver"in window){var n=function(e){e.forEach(function(e){if(e.addedNodes.length){if(t(e.addedNodes).length){var n=o;var s=t(e.addedNodes).filter(o);if(i!=""){s=s.find(i);n=o+" "+i}s.each(function(e){c(t(this),e+1,s.length,n,true)});if(!s.length){var a=t(e.addedNodes).find(n);a.each(function(e){c(t(this),e+1,a.length,n,true)})}}}})};var s=t(e)[0];var a={childList:true,subtree:true};var r=window.MutationObserver||window.WebKitMutationObserver;var d=new r(n);d.observe(s,a)}}function o(t,e,o){if("MutationObserver"in window){var i=function(t){t.forEach(function(t){if(e!=""){if((!t.oldValue||!t.oldValue.match(e)&&t.oldValue.match("loading"))&&t.target.classList&&t.target.classList.contains(e)){o()}}else{if(!t.oldValue||t.oldValue.match("loading")){o()}}})};var c=t[0];var n=window.MutationObserver||window.WebKitMutationObserver;var s=new n(i);var a={attributes:true,attributeOldValue:true,attributeFilter:["class"]};s.observe(c,a)}}var i={messages:[],open:false,init:function(){e("body",".woocommerce-error","",i.readNotice);e("body",".woocommerce-message","",i.readNotice);e("body",".woocommerce-info","",i.readNotice);e("body",".woocommerce-notice","",i.readNotice);e("body",".wc-block-components-notice-banner","",i.readNotice);i.checkExistingElements(".woocommerce-error");i.checkExistingElements(".woocommerce-message");i.checkExistingElements(".woocommerce-info");i.checkExistingElements(".woocommerce-notice");i.checkExistingElements(".wc-block-components-notice-banner")},checkExistingElements:function(e){var o=t(e);if(o.length){o.each(function(c){i.readNotice(t(this),c+1,o.length,e,false)})}},readNotice:function(e,o,c,n,s){t(".page-notifications").css("top",t(".top-headers-wrapper").outerHeight()+t("#wpadminbar").outerHeight());var a=n.match(/-(error|message|info|notice|success)/);a=!a||!a[1]?"success":a[1];if(o<=c){i.storeMessage(e,a,s)}if(o==c){i.clearPopupMessages();i.addMessagesToPopup();setTimeout(function(){i.openPopup(e)},100);setTimeout(function(){i.messages=[]},1e3)}},clearPopupMessages:function(){t("#gbt-custom-notification-notice").find(".gbt-custom-notification-content").empty()},removeDuplicatedMessages:function(){var t={};for(var e=0,o=i.messages.length;e<o;e++){t[i.messages[e]["message"]]=i.messages[e]}i.messages=new Array;for(var c in t)i.messages.push(t[c])},isMessageValid:function(t,e){var o=["<p></p>",'<ul class="msg"></ul>',"<ul></ul>"];var i=o.filter(function(e){return t.indexOf(e)!==-1});if(i.length>0){return false}return true},storeMessage:function(t,e,o){if(i.isMessageValid(t.html(),o)){i.messages.push({message:t.html(),type:e,dynamic:o});i.removeDuplicatedMessages()}},getAdditionalIconClass:function(t){var e="";switch(t){case"success":e=gbt_cn_info.success_icon_class;break;case"error":e=gbt_cn_info.error_icon_class;break;case"info":e=gbt_cn_info.info_icon_class;break}if(e==""){e+=" "+gbt_cn_info.icon_default_class}return e},addMessagesToPopup:function(e){var o;t.each(i.messages,function(e,c){var n=i.getAdditionalIconClass(c.type);var s=c.dynamic?"gbt-cn-dynamic":"gbt-cn-static";if(c.message!=""){if(c.message.indexOf("product_notification_background")>=0){o=t("#gbt-custom-notification-notice .gbt-custom-notification-content").append("<div class='gbt-custom-notification-notice "+c.type+" "+s+" '>"+c.message+"</div>")}else{t("#gbt-custom-notification-notice .gbt-custom-notification-content").append("<div class='gbt-custom-notification-notice "+c.type+" "+s+" '><i class='gbt-custom-notification-notice-icon "+n+"'></i><div class='gbt-custom-notification-message'><div>"+c.message+"</div></div></div>")}}})},openPopup:function(){t(".gbt-custom-notification-notice").addClass("open-notice");if(t(".page-notifications").hasClass("slide-out")){setTimeout(function(){t(".gbt-custom-notification-notice").removeClass("open-notice").addClass("close-notice")},2250)}}};document.addEventListener("DOMContentLoaded",function(){i.init();t("body").trigger({type:"gbt_cn",obj:i});t(document).on("click",".page-notifications.slide-in .gbt-custom-notification-notice",function(){t(this).removeClass("open-notice").addClass("close-notice")});t("body.gbt_custom_notif.single-product").on("click touchend",".product.product-type-simple .columns > .product_infos .cart .ajax_add_to_cart",function(e){if(t("body").find(".product_layout_classic").length>0){var i=t(".woocommerce-product-gallery .woocommerce-product-gallery__wrapper > .woocommerce-product-gallery__image img").attr("src")||""}else{var i=t(".woocommerce-product-gallery__wrapper .product_images .product-image:first-child img").attr("src")||""}var c=t(".product_title").html()||"";o(t(this),"added",function(){t("#content").prepend('<div class="woocommerce-message"><div class="product_notification_wrapper"><div class="product_notification_background"><img src="'+i+'" alt="Notification Image" /></div><div class="product_notification_text"><div>'+gbt_cn_info.cartButton+"&quot;"+c+"&quot; "+gbt_cn_info.addedToCartMessage+"</div></div></div></div>")})});t("body").on("click touchend",".products .ajax_add_to_cart",function(){var e=t(this).parents(".product").find(".product_thumbnail_wrapper img").attr("src")||"";var i=t(this).parents(".product").find(".woocommerce-loop-product__title a").html()||"";o(t(this),"added",function(){t(".st-content").prepend('<div class="woocommerce-message"><div class="product_notification_wrapper"><div class="product_notification_background"><img src="'+e+'" alt="Notification Image" /></div><div class="product_notification_text"><div>'+gbt_cn_info.cartButton+"&quot;"+i+"&quot; "+gbt_cn_info.addedToCartMessage+"</div></div></div></div>")})});t("body.gbt_custom_notif.woocommerce-wishlist").on("click touchend",".ajax_add_to_cart",function(){var e=t(this).parents("tr").find(".product-thumbnail img").attr("src")||"";var i=t(this).parents("tr").find(".product-name a").html()||"";o(t(this),"",function(){t(".st-content").prepend('<div class="woocommerce-message"><div class="product_notification_wrapper"><div class="product_notification_background"><img src="'+e+'" alt="Notification Image" /></div><div class="product_notification_text"><div>'+gbt_cn_info.cartButton+"&quot;"+i+"&quot; "+gbt_cn_info.addedToCartMessage+"</div></div></div></div>")})})})})(jQuery);